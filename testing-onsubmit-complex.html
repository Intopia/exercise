<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Testing onsubmit - complex</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="favicon.ico">
  <link href="assets/css/testing.css" rel="stylesheet">
  <style>
form {
  margin: 1em 0 0;
  padding: 0;
  background: none;
}

.error-notification {
  margin: 1em 0;
  padding: 1em;
  border: 1px solid rgb(200, 0, 0);
  background: #fff;
  font-size: .95em;
}

.error-notification h4 {
  margin: 0 0 1em;
  color: #000;
}

.error-notification ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.focus:focus {
  color: #000;
  outline: 0;
  animation: fade 5s forwards;
}

@keyframes fade {
  0% {
    background-color: #FFFF00;
  }
  100% {
    background-color: transparent;
  }
}

.input[aria-invalid="true"] {
  border: 1px solid rgb(200, 0, 0);
}

.input[aria-invalid="true"]:focus {
  border: 1px solid rgb(200, 0, 0);
  outline: 0;
  box-shadow: 0 0 0 2px #fff, 0 0 0 5px red;
}

.error-message {
  color: rgb(200, 0, 0);
}

  </style>
</head>
<body>

<a class="intopia-home-link" href="https://intopia.digital/" aria-label="Intopia website home">
  <img src="https://intopia.digital/wp-content/themes/intopia-refresh/assets/images/intopia.png" alt="Intopia" class="intopia-logo">
</a>

<h1>Testing onsubmit - complex</h1>
<p>Is the focus management of this page logical and intuitive?</p>

<div class="example">
  <h3 class="contact-details-heading">Contact details</h3>
  <div id="error-notification-container">
  </div>

  <form action="#" class="unstyled">
    <div class="form-group-small">
      <label class="label" for="name">Name</label>
      <input class="input" type="text" id="name">
      <span id="name-error-container"></span>
    </div>
    <div class="form-group-small">
      <label class="label" for="address">Address</label>
      <input class="input" type="text" id="address">
    </div>
    <div class="form-group-small">
      <label class="label" for="email">Email</label>
      <input class="input" type="email" id="email">
      <span id="email-error-container"></span>
    </div>
    <div class="form-group-spaced">
      <label class="label" for="phone">Phone</label>
      <input class="input" type="tel" id="phone">
    </div>
  </form>
  <button class="button" onclick="addError()">Submit</button>  
</div>

<script>
function addError() {
   if(document.getElementById("error") != null){
     
  } else {
  var x = document.createElement("div");
  x.setAttribute("class", "error-notification");
  x.innerHTML += `
  <h4 id="error" class="focus" tabindex="-1">Error: Please fix the following two errors and resubmit the form</h4>
  <ul>
    <li><a href="#name">Name: You must include a name</a></li>
    <li><a href="#email">Email: You must use a valid email address</a></li>
  </ul>
  `;
  document.getElementById("error-notification-container").appendChild(x);
  document.getElementById("error").focus();
  }
  var t = document.getElementById("name");
  t.setAttribute("aria-describedby", "name-error");
  t.setAttribute("aria-invalid", "true");
  if(document.getElementById("name-error") != null){
     
  } else {
  var y = document.createElement("span");
  y.setAttribute("class", "error-message");
  y.setAttribute("id", "name-error");
  y.innerHTML += `You must include a name`;
  document.getElementById("name-error-container").appendChild(y);
  }
  var q = document.getElementById("email");
  q.setAttribute("aria-describedby", "email-error");
  q.setAttribute("aria-invalid", "true");
  
  if(document.getElementById("email-error") != null){
     
  } else {
    
  var z = document.createElement("span");
  z.setAttribute("class", "error-message");
  z.setAttribute("id", "email-error");
  z.innerHTML += `You must use a valid email address`;
  document.getElementById("email-error-container").appendChild(z);
  }
}
</script>
<p class="footer-link"><a href="testing.html">Testing home</a></p>
</body>
</html>
